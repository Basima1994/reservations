{"ast":null,"code":"import _toConsumableArray from\"/Users/rbk-4/Desktop/MVP-JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/rbk-4/Desktop/MVP-JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/rbk-4/Desktop/MVP-JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/rbk-4/Desktop/MVP-JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/rbk-4/Desktop/MVP-JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/rbk-4/Desktop/MVP-JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/rbk-4/Desktop/MVP-JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/rbk-4/Desktop/MVP-JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/rbk-4/Desktop/MVP-JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import*as React from\"react\";import Paper from\"@material-ui/core/Paper\";import $ from\"jquery\";import{ViewState,EditingState,IntegratedEditing}from\"@devexpress/dx-react-scheduler\";import{Scheduler,Toolbar,MonthView,WeekView,DayView,ViewSwitcher,Appointments,AppointmentTooltip,AppointmentForm,DragDropProvider,EditRecurrenceMenu,AllDayPanel,ConfirmationDialog}from\"@devexpress/dx-react-scheduler-material-ui\";import{connectProps}from\"@devexpress/dx-react-core\";import{KeyboardDateTimePicker,MuiPickersUtilsProvider}from\"@material-ui/pickers\";import MomentUtils from\"@date-io/moment\";import{withStyles}from\"@material-ui/core/styles\";import Dialog from\"@material-ui/core/Dialog\";import DialogActions from\"@material-ui/core/DialogActions\";import DialogContent from\"@material-ui/core/DialogContent\";import DialogContentText from\"@material-ui/core/DialogContentText\";import DialogTitle from\"@material-ui/core/DialogTitle\";import Button from\"@material-ui/core/Button\";import Fab from\"@material-ui/core/Fab\";import IconButton from\"@material-ui/core/IconButton\";import AddIcon from\"@material-ui/icons/Add\";import TextField from\"@material-ui/core/TextField\";import EventNoteIcon from\"@material-ui/icons/EventNote\";import Notes from\"@material-ui/icons/Notes\";import Close from\"@material-ui/icons/Close\";import CalendarToday from\"@material-ui/icons/CalendarToday\";import Create from\"@material-ui/icons/Create\";import axios from\"axios\";import{appointments}from\"./data\";var containerStyles=function containerStyles(theme){return{container:{width:theme.spacing(68),padding:0,paddingBottom:theme.spacing(2)},content:{padding:theme.spacing(2),paddingTop:0},header:{overflow:\"hidden\",paddingTop:theme.spacing(0.5)},closeButton:{float:\"right\"},buttonGroup:{display:\"flex\",justifyContent:\"flex-end\",padding:theme.spacing(0,2)},button:{marginLeft:theme.spacing(2)},picker:{marginRight:theme.spacing(2),\"&:last-child\":{marginRight:0},width:\"50%\"},wrapper:{display:\"flex\",justifyContent:\"space-between\",padding:theme.spacing(1,0)},icon:{margin:theme.spacing(2,0),marginRight:theme.spacing(2)},textField:{width:\"100%\"}};};var today=new Date();var date=today.getFullYear()+\"-\"+(today.getMonth()+1)+\"-\"+today.getDate();var AppointmentFormContainerBasic=/*#__PURE__*/function(_React$PureComponent){_inherits(AppointmentFormContainerBasic,_React$PureComponent);function AppointmentFormContainerBasic(props){var _this;_classCallCheck(this,AppointmentFormContainerBasic);_this=_possibleConstructorReturn(this,_getPrototypeOf(AppointmentFormContainerBasic).call(this,props));_this.handleChange=function(){return function(e){this.setState({title:e.target.value});};};_this.state={appointmentChanges:{}};_this.getAppointmentData=function(){var appointmentData=_this.props.appointmentData;return appointmentData;};_this.getAppointmentChanges=function(){var appointmentChanges=_this.state.appointmentChanges;return appointmentChanges;};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.changeAppointment=_this.changeAppointment.bind(_assertThisInitialized(_this));_this.commitAppointment=_this.commitAppointment.bind(_assertThisInitialized(_this));return _this;}_createClass(AppointmentFormContainerBasic,[{key:\"changeAppointment\",value:function changeAppointment(_ref){var field=_ref.field,changes=_ref.changes;var nextChanges=_objectSpread({},this.getAppointmentChanges(),_defineProperty({},field,changes));this.setState({appointmentChanges:nextChanges});}},{key:\"commitAppointment\",value:function commitAppointment(type){var commitChanges=this.props.commitChanges;var appointment=_objectSpread({},this.getAppointmentData(),{},this.getAppointmentChanges());if(type===\"deleted\"){commitChanges(_defineProperty({},type,appointment._id));}else if(type===\"changed\"){commitChanges(_defineProperty({},type,_defineProperty({},appointment._id,appointment)));}else{commitChanges(_defineProperty({},type,appointment));}this.setState({appointmentChanges:{}});}},{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,classes=_this$props.classes,visible=_this$props.visible,visibleChange=_this$props.visibleChange,appointmentData=_this$props.appointmentData,cancelAppointment=_this$props.cancelAppointment,target=_this$props.target,onHide=_this$props.onHide;var appointmentChanges=this.state.appointmentChanges;var displayAppointmentData=_objectSpread({},appointmentData,{},appointmentChanges);var isNewAppointment=appointmentData._id===undefined;var applyChanges=isNewAppointment?function(){_this2.commitAppointment(\"added\");axios.post(\"/Appointments\",_this2.state.appointmentChanges);console.log(\"if new\",_this2.state.appointmentChanges);}:function(){_this2.commitAppointment(\"changed\");axios.post(\"/Appointments\",_this2.state.appointmentChanges);console.log(\"old\",_this2.state.appointmentChanges);};var textEditorProps=function textEditorProps(field){return{variant:\"outlined\",onChange:function onChange(_ref2){var change=_ref2.target;return _this2.changeAppointment({field:[field],changes:change.value});},value:displayAppointmentData[field]||\"\",label:field[0].toUpperCase()+field.slice(1),className:classes.textField};};var pickerEditorProps=function pickerEditorProps(field){return{className:classes.picker,// keyboard: true,\nampm:false,value:displayAppointmentData[field],onChange:function onChange(date){return _this2.changeAppointment({field:[field],changes:date?date.toDate():new Date(displayAppointmentData[field])});},inputVariant:\"outlined\",format:\"DD/MM/YYYY HH:mm\",onError:function onError(){return null;}};};var cancelChanges=function cancelChanges(){_this2.setState({appointmentChanges:{}});visibleChange();cancelAppointment();};return React.createElement(AppointmentForm.Overlay,{visible:visible,target:target,fullSize:true,onHide:onHide},React.createElement(\"div\",null,React.createElement(\"div\",{className:classes.header},React.createElement(IconButton,{className:classes.closeButton,onClick:cancelChanges},React.createElement(Close,{color:\"action\"}))),React.createElement(\"div\",{className:classes.content},React.createElement(\"div\",{className:classes.wrapper},React.createElement(Create,{className:classes.icon,color:\"action\"}),React.createElement(TextField,textEditorProps(\"title\"))),React.createElement(\"div\",{className:classes.wrapper},React.createElement(CalendarToday,{className:classes.icon,color:\"action\"}),React.createElement(MuiPickersUtilsProvider,{utils:MomentUtils},React.createElement(KeyboardDateTimePicker,Object.assign({label:\"Start Date\"},pickerEditorProps(\"startDate\"))),React.createElement(KeyboardDateTimePicker,Object.assign({label:\"End Date\"},pickerEditorProps(\"endDate\"))))),React.createElement(\"div\",{className:classes.wrapper},React.createElement(EventNoteIcon,{className:classes.icon,color:\"action\"}),React.createElement(TextField,textEditorProps(\"type\"))),React.createElement(\"div\",{className:classes.wrapper},React.createElement(Notes,{className:classes.icon,color:\"action\"}),React.createElement(TextField,Object.assign({ref:function ref(x){return _this2.notes=x;}},textEditorProps(\"notes\"),{multiline:true,rows:\"6\"})))),React.createElement(\"div\",{className:classes.buttonGroup},!isNewAppointment&&React.createElement(Button,{variant:\"outlined\",color:\"secondary\",className:classes.button,onClick:function onClick(){visibleChange();_this2.commitAppointment(\"deleted\");}},\"Delete\"),React.createElement(Button,{variant:\"outlined\",color:\"primary\",className:classes.button,onClick:function onClick(){visibleChange();applyChanges();}},isNewAppointment?\"Create\":\"Save\"))));}}]);return AppointmentFormContainerBasic;}(React.PureComponent);var AppointmentFormContainer=withStyles(containerStyles,{name:\"AppointmentFormContainer\"})(AppointmentFormContainerBasic);var styles=function styles(theme){return{addButton:{position:\"absolute\",bottom:theme.spacing(1)*3,right:theme.spacing(1)*4}};};var Calender=/*#__PURE__*/function(_React$PureComponent2){_inherits(Calender,_React$PureComponent2);function Calender(props){var _this3;_classCallCheck(this,Calender);_this3=_possibleConstructorReturn(this,_getPrototypeOf(Calender).call(this,props));_this3.state={data:appointments,currentDate:date,confirmationVisible:false,editingFormVisible:false,deletedAppointmentId:undefined,editingAppointment:undefined,previousAppointment:undefined,addedAppointment:{},startDayHour:0,endDayHour:24,isNewAppointment:false};var that=_assertThisInitialized(_this3);$.ajax({url:\"/Appointments\",type:\"GET\",dataType:\"JSON\",success:function success(data){that.setState({data:data});console.log(\"get\",that.state.data);},error:function error(err){console.log(err);}});_this3.toggleConfirmationVisible=_this3.toggleConfirmationVisible.bind(_assertThisInitialized(_this3));_this3.commitDeletedAppointment=_this3.commitDeletedAppointment.bind(_assertThisInitialized(_this3));_this3.toggleEditingFormVisibility=_this3.toggleEditingFormVisibility.bind(_assertThisInitialized(_this3));_this3.commitChanges=_this3.commitChanges.bind(_assertThisInitialized(_this3));_this3.onEditingAppointmentChange=_this3.onEditingAppointmentChange.bind(_assertThisInitialized(_this3));_this3.onAddedAppointmentChange=_this3.onAddedAppointmentChange.bind(_assertThisInitialized(_this3));_this3.appointmentForm=connectProps(AppointmentFormContainer,function(){var _this3$state=_this3.state,editingFormVisible=_this3$state.editingFormVisible,editingAppointment=_this3$state.editingAppointment,data=_this3$state.data,addedAppointment=_this3$state.addedAppointment,isNewAppointment=_this3$state.isNewAppointment,previousAppointment=_this3$state.previousAppointment;var currentAppointment=data.filter(function(appointment){return editingAppointment&&appointment._id===editingAppointment._id;})[0]||addedAppointment;var cancelAppointment=function cancelAppointment(){if(isNewAppointment){_this3.setState({editingAppointment:previousAppointment,isNewAppointment:false});}};return{visible:editingFormVisible,appointmentData:currentAppointment,commitChanges:_this3.commitChanges,visibleChange:_this3.toggleEditingFormVisibility,onEditingAppointmentChange:_this3.onEditingAppointmentChange,cancelAppointment:cancelAppointment};});return _this3;}_createClass(Calender,[{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.appointmentForm.update();}},{key:\"onEditingAppointmentChange\",value:function onEditingAppointmentChange(editingAppointment){this.setState({editingAppointment:editingAppointment});}},{key:\"onAddedAppointmentChange\",value:function onAddedAppointmentChange(addedAppointment){this.setState({addedAppointment:addedAppointment});var editingAppointment=this.state.editingAppointment;if(editingAppointment!==undefined){this.setState({previousAppointment:editingAppointment});}this.setState({editingAppointment:undefined,isNewAppointment:true});}},{key:\"setDeletedAppointmentId\",value:function setDeletedAppointmentId(_id){this.setState({deletedAppointmentId:_id});}},{key:\"toggleEditingFormVisibility\",value:function toggleEditingFormVisibility(){var editingFormVisible=this.state.editingFormVisible;this.setState({editingFormVisible:!editingFormVisible});}},{key:\"toggleConfirmationVisible\",value:function toggleConfirmationVisible(){var confirmationVisible=this.state.confirmationVisible;this.setState({confirmationVisible:!confirmationVisible});}},{key:\"commitDeletedAppointment\",value:function commitDeletedAppointment(){this.setState(function(state){var data=state.data,deletedAppointmentId=state.deletedAppointmentId;var nextData=data.filter(function(appointment){return appointment._id!==deletedAppointmentId;});return{data:nextData,deletedAppointmentId:null};});this.toggleConfirmationVisible();}// function for the editing and deletion\n},{key:\"commitChanges\",value:function commitChanges(_ref3){var _this4=this;var added=_ref3.added,changed=_ref3.changed,deleted=_ref3.deleted;this.setState(function(state){var data=state.data;if(added){var startingAddedId=data.length>0?data[data.length-1]._id+1:0;data=[].concat(_toConsumableArray(data),[_objectSpread({_id:startingAddedId},added)]);}if(changed){data=data.map(function(appointment){return changed[appointment._id]?_objectSpread({},appointment,{},changed[appointment._id]):appointment;});}if(deleted!==undefined){_this4.setDeletedAppointmentId(deleted);_this4.toggleConfirmationVisible();}return{data:data,addedAppointment:{}};});}},{key:\"render\",value:function render(){var _this5=this;var _this$state=this.state,currentDate=_this$state.currentDate,data=_this$state.data,confirmationVisible=_this$state.confirmationVisible,editingFormVisible=_this$state.editingFormVisible,startDayHour=_this$state.startDayHour,endDayHour=_this$state.endDayHour;var classes=this.props.classes;return React.createElement(Paper,null,React.createElement(Scheduler,{data:data,height:660},React.createElement(ViewState,{currentDate:currentDate}),React.createElement(EditingState,{onCommitChanges:this.commitChanges,onEditingAppointmentChange:this.onEditingAppointmentChange,onAddedAppointmentChange:this.onAddedAppointmentChange}),React.createElement(IntegratedEditing,null),React.createElement(DayView,{startDayHour:0,endDayHour:24}),React.createElement(WeekView,{startDayHour:startDayHour,endDayHour:endDayHour}),React.createElement(MonthView,null),React.createElement(AllDayPanel,null),React.createElement(EditRecurrenceMenu,null),React.createElement(ConfirmationDialog,null),React.createElement(Appointments,null),React.createElement(AppointmentTooltip,{showOpenButton:true,showCloseButton:true,showDeleteButton:true}),React.createElement(Toolbar,null),React.createElement(ViewSwitcher,null),React.createElement(AppointmentForm,{overlayComponent:this.appointmentForm,visible:editingFormVisible,onVisibilityChange:this.toggleEditingFormVisibility}),React.createElement(DragDropProvider,null)),React.createElement(Dialog,{open:confirmationVisible,onClose:this.cancelDelete},React.createElement(DialogTitle,null,\"Delete Appointment\"),React.createElement(DialogContent,null,React.createElement(DialogContentText,null,\"Are you sure you want to delete this appointment?\")),React.createElement(DialogActions,null,React.createElement(Button,{onClick:this.toggleConfirmationVisible,color:\"primary\",variant:\"outlined\"},\"Cancel\"),React.createElement(Button,{onClick:this.commitDeletedAppointment,color:\"secondary\",variant:\"outlined\"},\"Delete\"))),React.createElement(Fab,{color:\"secondary\",className:classes.addButton,onClick:function onClick(){_this5.setState({editingFormVisible:true});_this5.onEditingAppointmentChange(undefined);_this5.onAddedAppointmentChange({startDate:new Date(currentDate).setHours(startDayHour),endDate:new Date(currentDate).setHours(startDayHour+1)});}},React.createElement(AddIcon,null)));}}]);return Calender;}(React.PureComponent);export default withStyles(styles,{name:\"EditingDemo\"})(Calender);","map":{"version":3,"sources":["/Users/rbk-4/Desktop/MVP-JS/src/Calender.js"],"names":["React","Paper","$","ViewState","EditingState","IntegratedEditing","Scheduler","Toolbar","MonthView","WeekView","DayView","ViewSwitcher","Appointments","AppointmentTooltip","AppointmentForm","DragDropProvider","EditRecurrenceMenu","AllDayPanel","ConfirmationDialog","connectProps","KeyboardDateTimePicker","MuiPickersUtilsProvider","MomentUtils","withStyles","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Button","Fab","IconButton","AddIcon","TextField","EventNoteIcon","Notes","Close","CalendarToday","Create","axios","appointments","containerStyles","theme","container","width","spacing","padding","paddingBottom","content","paddingTop","header","overflow","closeButton","float","buttonGroup","display","justifyContent","button","marginLeft","picker","marginRight","wrapper","icon","margin","textField","today","Date","date","getFullYear","getMonth","getDate","AppointmentFormContainerBasic","props","handleChange","e","setState","title","target","value","state","appointmentChanges","getAppointmentData","appointmentData","getAppointmentChanges","bind","changeAppointment","commitAppointment","field","changes","nextChanges","type","commitChanges","appointment","_id","classes","visible","visibleChange","cancelAppointment","onHide","displayAppointmentData","isNewAppointment","undefined","applyChanges","post","console","log","textEditorProps","variant","onChange","change","label","toUpperCase","slice","className","pickerEditorProps","ampm","toDate","inputVariant","format","onError","cancelChanges","x","notes","PureComponent","AppointmentFormContainer","name","styles","addButton","position","bottom","right","Calender","data","currentDate","confirmationVisible","editingFormVisible","deletedAppointmentId","editingAppointment","previousAppointment","addedAppointment","startDayHour","endDayHour","that","ajax","url","dataType","success","error","err","toggleConfirmationVisible","commitDeletedAppointment","toggleEditingFormVisibility","onEditingAppointmentChange","onAddedAppointmentChange","appointmentForm","currentAppointment","filter","update","nextData","added","changed","deleted","startingAddedId","length","map","setDeletedAppointmentId","cancelDelete","startDate","setHours","endDate"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport Paper from \"@material-ui/core/Paper\";\nimport $ from \"jquery\";\nimport {\n  ViewState,\n  EditingState,\n  IntegratedEditing\n} from \"@devexpress/dx-react-scheduler\";\nimport {\n  Scheduler,\n  Toolbar,\n  MonthView,\n  WeekView,\n  DayView,\n  ViewSwitcher,\n  Appointments,\n  AppointmentTooltip,\n  AppointmentForm,\n  DragDropProvider,\n  EditRecurrenceMenu,\n  AllDayPanel,\n  ConfirmationDialog\n} from \"@devexpress/dx-react-scheduler-material-ui\";\nimport { connectProps } from \"@devexpress/dx-react-core\";\nimport {\n  KeyboardDateTimePicker,\n  MuiPickersUtilsProvider\n} from \"@material-ui/pickers\";\nimport MomentUtils from \"@date-io/moment\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Button from \"@material-ui/core/Button\";\nimport Fab from \"@material-ui/core/Fab\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport TextField from \"@material-ui/core/TextField\";\nimport EventNoteIcon from \"@material-ui/icons/EventNote\";\nimport Notes from \"@material-ui/icons/Notes\";\nimport Close from \"@material-ui/icons/Close\";\nimport CalendarToday from \"@material-ui/icons/CalendarToday\";\nimport Create from \"@material-ui/icons/Create\";\nimport axios from \"axios\";\nimport { appointments } from \"./data\";\n\nconst containerStyles = theme => ({\n  container: {\n    width: theme.spacing(68),\n    padding: 0,\n    paddingBottom: theme.spacing(2)\n  },\n  content: {\n    padding: theme.spacing(2),\n    paddingTop: 0\n  },\n  header: {\n    overflow: \"hidden\",\n    paddingTop: theme.spacing(0.5)\n  },\n  closeButton: {\n    float: \"right\"\n  },\n  buttonGroup: {\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    padding: theme.spacing(0, 2)\n  },\n  button: {\n    marginLeft: theme.spacing(2)\n  },\n  picker: {\n    marginRight: theme.spacing(2),\n    \"&:last-child\": {\n      marginRight: 0\n    },\n    width: \"50%\"\n  },\n  wrapper: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    padding: theme.spacing(1, 0)\n  },\n  icon: {\n    margin: theme.spacing(2, 0),\n    marginRight: theme.spacing(2)\n  },\n  textField: {\n    width: \"100%\"\n  }\n});\n\nvar today = new Date();\nvar date =\n  today.getFullYear() + \"-\" + (today.getMonth() + 1) + \"-\" + today.getDate();\n\nclass AppointmentFormContainerBasic extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      appointmentChanges: {}\n    };\n   \n    this.getAppointmentData = () => {\n      const { appointmentData } = this.props;\n      return appointmentData;\n    };\n    this.getAppointmentChanges = () => {\n      const { appointmentChanges } = this.state;\n      return appointmentChanges;\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.changeAppointment = this.changeAppointment.bind(this);\n    this.commitAppointment = this.commitAppointment.bind(this);\n  }\n  handleChange = () =>\n    function(e) {\n      this.setState({\n        title: e.target.value\n      });\n    };\n  changeAppointment({ field, changes }) {\n    const nextChanges = {\n      ...this.getAppointmentChanges(),\n      [field]: changes\n    };\n    this.setState({\n      appointmentChanges: nextChanges\n    });\n  }\n\n  commitAppointment(type) {\n    const { commitChanges } = this.props;\n    const appointment = {\n      ...this.getAppointmentData(),\n      ...this.getAppointmentChanges()\n    };\n    if (type === \"deleted\") {\n      commitChanges({ [type]: appointment._id });\n    } else if (type === \"changed\") {\n      commitChanges({ [type]: { [appointment._id]: appointment } });\n    } else {\n      commitChanges({ [type]: appointment });\n    }\n    this.setState({\n      appointmentChanges: {}\n    });\n  }\n\n  render() {\n    const {\n      classes,\n      visible,\n      visibleChange,\n      appointmentData,\n      cancelAppointment,\n      target,\n      onHide\n    } = this.props;\n    const { appointmentChanges } = this.state;\n\n    const displayAppointmentData = {\n      ...appointmentData,\n      ...appointmentChanges\n    };\n\n    const isNewAppointment = appointmentData._id === undefined;\n    const applyChanges = isNewAppointment\n      ? () => {\n          this.commitAppointment(\"added\");\n          axios.post(\"/Appointments\", this.state.appointmentChanges);\n          console.log(\"if new\", this.state.appointmentChanges);\n        }\n      : () => {\n          this.commitAppointment(\"changed\");\n          axios.post(\"/Appointments\", this.state.appointmentChanges);\n          console.log(\"old\", this.state.appointmentChanges);\n        };\n\n    const textEditorProps = field => ({\n      variant: \"outlined\",\n      onChange: ({ target: change }) =>\n        this.changeAppointment({\n          field: [field],\n          changes: change.value\n        }),\n      value: displayAppointmentData[field] || \"\",\n      label: field[0].toUpperCase() + field.slice(1),\n      className: classes.textField\n    });\n\n    const pickerEditorProps = field => ({\n      className: classes.picker,\n      // keyboard: true,\n      ampm: false,\n      value: displayAppointmentData[field],\n      onChange: date =>\n        this.changeAppointment({\n          field: [field],\n          changes: date\n            ? date.toDate()\n            : new Date(displayAppointmentData[field])\n        }),\n      inputVariant: \"outlined\",\n      format: \"DD/MM/YYYY HH:mm\",\n      onError: () => null\n    });\n\n    const cancelChanges = () => {\n      this.setState({\n        appointmentChanges: {}\n      });\n      visibleChange();\n      cancelAppointment();\n    };\n\n    return (\n      <AppointmentForm.Overlay\n        visible={visible}\n        target={target}\n        fullSize\n        onHide={onHide}\n      >\n        <div>\n          <div className={classes.header}>\n            <IconButton className={classes.closeButton} onClick={cancelChanges}>\n              <Close color=\"action\" />\n            </IconButton>\n          </div>\n          <div className={classes.content}>\n            <div className={classes.wrapper}>\n              <Create className={classes.icon} color=\"action\" />\n              <TextField {...textEditorProps(\"title\")} />\n            </div>\n            <div className={classes.wrapper}>\n              <CalendarToday className={classes.icon} color=\"action\" />\n              <MuiPickersUtilsProvider utils={MomentUtils}>\n                <KeyboardDateTimePicker\n                  label=\"Start Date\"\n                  {...pickerEditorProps(\"startDate\")}\n                />\n                <KeyboardDateTimePicker\n                  label=\"End Date\"\n                  {...pickerEditorProps(\"endDate\")}\n                />\n              </MuiPickersUtilsProvider>\n            </div>\n            <div className={classes.wrapper}>\n              <EventNoteIcon className={classes.icon} color=\"action\" />\n              <TextField {...textEditorProps(\"type\")} />\n            </div>\n            <div className={classes.wrapper}>\n              <Notes className={classes.icon} color=\"action\" />\n              <TextField\n                ref={x => (this.notes = x)}\n                {...textEditorProps(\"notes\")}\n                multiline\n                rows=\"6\"\n              />\n            </div>\n          </div>\n          <div className={classes.buttonGroup}>\n            {!isNewAppointment && (\n              <Button\n                variant=\"outlined\"\n                color=\"secondary\"\n                className={classes.button}\n                onClick={() => {\n                  visibleChange();\n                  this.commitAppointment(\"deleted\");\n                }}\n              >\n                Delete\n              </Button>\n            )}\n            <Button\n              variant=\"outlined\"\n              color=\"primary\"\n              className={classes.button}\n              onClick={() => {\n                visibleChange();\n                applyChanges();\n              }}\n            >\n              {isNewAppointment ? \"Create\" : \"Save\"}\n            </Button>\n          </div>\n        </div>\n      </AppointmentForm.Overlay>\n    );\n  }\n}\n\nconst AppointmentFormContainer = withStyles(containerStyles, {\n  name: \"AppointmentFormContainer\"\n})(AppointmentFormContainerBasic);\n\nconst styles = theme => ({\n  addButton: {\n    position: \"absolute\",\n    bottom: theme.spacing(1) * 3,\n    right: theme.spacing(1) * 4\n  }\n});\n\nclass Calender extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: appointments,\n      currentDate: date,\n      confirmationVisible: false,\n      editingFormVisible: false,\n      deletedAppointmentId: undefined,\n      editingAppointment: undefined,\n      previousAppointment: undefined,\n      addedAppointment: {},\n      startDayHour: 0,\n      endDayHour: 24,\n      isNewAppointment: false\n    };\n\n    var that = this;\n    $.ajax({\n      url: \"/Appointments\",\n      type: \"GET\",\n      dataType: \"JSON\",\n      success: function(data) {\n        that.setState({ data: data });\n        console.log(\"get\", that.state.data);\n      },\n      error: function(err) {\n        console.log(err);\n      }\n    });\n    \n    this.toggleConfirmationVisible = this.toggleConfirmationVisible.bind(this);\n    this.commitDeletedAppointment = this.commitDeletedAppointment.bind(this);\n    this.toggleEditingFormVisibility = this.toggleEditingFormVisibility.bind(\n      this\n    );\n\n    this.commitChanges = this.commitChanges.bind(this);\n    this.onEditingAppointmentChange = this.onEditingAppointmentChange.bind(\n      this\n    );\n    this.onAddedAppointmentChange = this.onAddedAppointmentChange.bind(this);\n    this.appointmentForm = connectProps(AppointmentFormContainer, () => {\n      const {\n        editingFormVisible,\n        editingAppointment,\n        data,\n        addedAppointment,\n        isNewAppointment,\n        previousAppointment\n      } = this.state;\n\n\n      const currentAppointment =\n        data.filter(\n          appointment =>\n            editingAppointment && appointment._id === editingAppointment._id\n        )[0] || addedAppointment;\n      const cancelAppointment = () => {\n        if (isNewAppointment) {\n          this.setState({\n            editingAppointment: previousAppointment,\n            isNewAppointment: false\n          });\n        }\n      };\n\n      return {\n        visible: editingFormVisible,\n        appointmentData: currentAppointment,\n        commitChanges: this.commitChanges,\n        visibleChange: this.toggleEditingFormVisibility,\n        onEditingAppointmentChange: this.onEditingAppointmentChange,\n        cancelAppointment\n      };\n    });\n  }\n\n  componentDidUpdate() {\n    this.appointmentForm.update();\n  }\n\n  onEditingAppointmentChange(editingAppointment) {\n    this.setState({ editingAppointment });\n  }\n\n  onAddedAppointmentChange(addedAppointment) {\n    this.setState({ addedAppointment });\n    const { editingAppointment } = this.state;\n    if (editingAppointment !== undefined) {\n      this.setState({\n        previousAppointment: editingAppointment\n      });\n    }\n    this.setState({ editingAppointment: undefined, isNewAppointment: true });\n  }\n\n  setDeletedAppointmentId(_id) {\n    this.setState({ deletedAppointmentId: _id });\n  }\n\n  toggleEditingFormVisibility() {\n    const { editingFormVisible } = this.state;\n    this.setState({\n      editingFormVisible: !editingFormVisible\n    });\n  }\n\n  toggleConfirmationVisible() {\n    const { confirmationVisible } = this.state;\n    this.setState({ confirmationVisible: !confirmationVisible });\n  }\n\n  commitDeletedAppointment() {\n    this.setState(state => {\n      const { data, deletedAppointmentId } = state;\n      const nextData = data.filter(\n        appointment => appointment._id !== deletedAppointmentId\n      );\n\n      return { data: nextData, deletedAppointmentId: null };\n    });\n    this.toggleConfirmationVisible();\n  }\n  // function for the editing and deletion\n  commitChanges({ added, changed, deleted }) {\n    this.setState(state => {\n      let { data } = state;\n      if (added) {\n        const startingAddedId =\n          data.length > 0 ? data[data.length - 1]._id + 1 : 0;\n        data = [...data, { _id: startingAddedId, ...added }];\n      }\n      if (changed) {\n        data = data.map(appointment =>\n          changed[appointment._id]\n            ? { ...appointment, ...changed[appointment._id] }\n            : appointment\n        );\n      }\n      if (deleted !== undefined) {\n        this.setDeletedAppointmentId(deleted);\n        this.toggleConfirmationVisible();\n      }\n      return { data, addedAppointment: {} };\n    });\n  }\n\n  render() {\n    const {\n      currentDate,\n      data,\n      confirmationVisible,\n      editingFormVisible,\n      startDayHour,\n      endDayHour\n    } = this.state;\n    const { classes } = this.props;\n\n    return (\n      <Paper>\n        <Scheduler data={data} height={660}>\n          <ViewState currentDate={currentDate} />\n          <EditingState\n            onCommitChanges={this.commitChanges}\n            onEditingAppointmentChange={this.onEditingAppointmentChange}\n            onAddedAppointmentChange={this.onAddedAppointmentChange}\n          />\n          <IntegratedEditing />\n          <DayView startDayHour={0} endDayHour={24} />\n\n          <WeekView startDayHour={startDayHour} endDayHour={endDayHour} />\n          <MonthView />\n          <AllDayPanel />\n          <EditRecurrenceMenu />\n          <ConfirmationDialog />\n          <Appointments />\n          <AppointmentTooltip showOpenButton showCloseButton showDeleteButton />\n          <Toolbar />\n          <ViewSwitcher />\n          <AppointmentForm\n            overlayComponent={this.appointmentForm}\n            visible={editingFormVisible}\n            onVisibilityChange={this.toggleEditingFormVisibility}\n          />\n          <DragDropProvider />\n        </Scheduler>\n\n        <Dialog open={confirmationVisible} onClose={this.cancelDelete}>\n          <DialogTitle>Delete Appointment</DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              Are you sure you want to delete this appointment?\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button\n              onClick={this.toggleConfirmationVisible}\n              color=\"primary\"\n              variant=\"outlined\"\n            >\n              Cancel\n            </Button>\n            <Button\n              onClick={this.commitDeletedAppointment}\n              color=\"secondary\"\n              variant=\"outlined\"\n            >\n              Delete\n            </Button>\n          </DialogActions>\n        </Dialog>\n\n        <Fab\n          color=\"secondary\"\n          className={classes.addButton}\n          onClick={() => {\n            this.setState({ editingFormVisible: true });\n            this.onEditingAppointmentChange(undefined);\n            this.onAddedAppointmentChange({\n              startDate: new Date(currentDate).setHours(startDayHour),\n              endDate: new Date(currentDate).setHours(startDayHour + 1)\n            });\n          }}\n        >\n          <AddIcon />\n        </Fab>\n      </Paper>\n    );\n  }\n}\n\nexport default withStyles(styles, { name: \"EditingDemo\" })(Calender);\n"]},"metadata":{},"sourceType":"module"}